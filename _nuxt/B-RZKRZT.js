import{E as z,r as O,G as b,H as v,I as C,J as I,K as x,e as R,L as D,M as U,m as M}from"./DDdGTNQA.js";function N(t,i){if(typeof t!="string")throw new TypeError("argument str must be a string");const e={},r=i||{},n=r.decode||L;let s=0;for(;s<t.length;){const o=t.indexOf("=",s);if(o===-1)break;let a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<o){s=t.lastIndexOf(";",o-1)+1;continue}const c=t.slice(s,o).trim();if(r?.filter&&!r?.filter(c)){s=a+1;continue}if(e[c]===void 0){let u=t.slice(o+1,a).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),e[c]=B(u,n)}s=a+1}return e}function L(t){return t.includes("%")?decodeURIComponent(t):t}function B(t,i){try{return i(t)}catch{return t}}const m=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function A(t,i,e){const r=e||{},n=r.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!m.test(t))throw new TypeError("argument name is invalid");const s=n(i);if(s&&!m.test(s))throw new TypeError("argument val is invalid");let o=t+"="+s;if(r.maxAge!==void 0&&r.maxAge!==null){const a=r.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!m.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!m.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(!P(r.expires)||Number.isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":{o+="; Priority=Low";break}case"medium":{o+="; Priority=Medium";break}case"high":{o+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:{o+="; SameSite=Strict";break}case"lax":{o+="; SameSite=Lax";break}case"strict":{o+="; SameSite=Strict";break}case"none":{o+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o}function P(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function k(t){return typeof t=="string"?`'${t}'`:new _().serialize(t)}const _=(function(){class t{#e=new Map;compare(e,r){const n=typeof e,s=typeof r;return n==="string"&&s==="string"?e.localeCompare(r):n==="number"&&s==="number"?e-r:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(r,!0))}serialize(e,r){if(e===null)return"null";switch(typeof e){case"string":return r?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const r=Object.prototype.toString.call(e);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),e);const n=e.constructor,s=n===Object||n===void 0?"":n.name;if(s!==""&&globalThis[s]===n)return this.serializeBuiltInType(s,e);if(typeof e.toJSON=="function"){const o=e.toJSON();return s+(o!==null&&typeof o=="object"?this.$object(o):`(${this.serialize(o)})`)}return this.serializeObjectEntries(s,Object.entries(e))}serializeBuiltInType(e,r){const n=this["$"+e];if(n)return n.call(this,r);if(typeof r?.entries=="function")return this.serializeObjectEntries(e,r.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,r){const n=Array.from(r).sort((o,a)=>this.compare(o[0],a[0]));let s=`${e}{`;for(let o=0;o<n.length;o++){const[a,c]=n[o];s+=`${this.serialize(a,!0)}:${this.serialize(c)}`,o<n.length-1&&(s+=",")}return s+"}"}$object(e){let r=this.#e.get(e);return r===void 0&&(this.#e.set(e,`#${this.#e.size}`),r=this.serializeObject(e),this.#e.set(e,r)),r}$function(e){const r=Function.prototype.toString.call(e);return r.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(e){let r="[";for(let n=0;n<e.length;n++)r+=this.serialize(e[n]),n<e.length-1&&(r+=",");return r+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((r,n)=>this.compare(r,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const i of["Error","RegExp","URL"])t.prototype["$"+i]=function(e){return`${i}(${e})`};for(const i of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+i]=function(e){return`${i}[${e.join(",")}]`};for(const i of["BigInt64Array","BigUint64Array"])t.prototype["$"+i]=function(e){return`${i}[${e.join("n,")}${e.length>0?"n":""}]`};return t})();function F(t,i){return t===i||k(t)===k(i)}function l(t){if(typeof t!="object")return t;var i,e,r=Object.prototype.toString.call(t);if(r==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){e=new t.constructor;for(i in t)t.hasOwnProperty(i)&&e[i]!==t[i]&&(e[i]=l(t[i]))}else{e={};for(i in t)i==="__proto__"?Object.defineProperty(e,i,{value:l(t[i]),configurable:!0,enumerable:!0,writable:!0}):e[i]=l(t[i])}return e}if(r==="[object Array]"){for(i=t.length,e=Array(i);i--;)e[i]=l(t[i]);return e}return r==="[object Set]"?(e=new Set,t.forEach(function(n){e.add(l(n))}),e):r==="[object Map]"?(e=new Map,t.forEach(function(n,s){e.set(l(s),l(n))}),e):r==="[object Date]"?new Date(+t):r==="[object RegExp]"?(e=new RegExp(t.source,t.flags),e.lastIndex=t.lastIndex,e):r==="[object DataView]"?new t.constructor(l(t.buffer)):r==="[object ArrayBuffer]"?t.slice(0):r.slice(-6)==="Array]"?new t.constructor(t):t}const H={path:"/",watch:!0,decode:t=>z(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},g=globalThis.cookieStore;function J(t,i){const e={...H,...i};e.filter??=u=>u===t;const r=E(e)||{};let n;e.maxAge!==void 0?n=e.maxAge*1e3:e.expires&&(n=e.expires.getTime()-Date.now());const s=n!==void 0&&n<=0,o=s||r[t]===void 0||r[t]===null,a=l(s?void 0:r[t]??e.default?.()),c=n&&!s?q(a,n,e.watch&&e.watch!=="shallow"):O(a);{let u=null;try{!g&&typeof BroadcastChannel<"u"&&(u=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const p=(f=!1)=>{!f&&(e.readonly||F(c.value,r[t]))||(K(t,c.value,e),r[t]=l(c.value),u?.postMessage({value:e.encode(c.value)}))},d=f=>{const h=f.refresh?E(e)?.[t]:e.decode(f.value);y=!0,c.value=h,r[t]=l(h),x(()=>{y=!1})};let y=!1;const S=!!C();if(S&&b(()=>{y=!0,p(),u?.close()}),g){const f=h=>{const $=h.changed.find(w=>w.name===t),T=h.deleted.find(w=>w.name===t);$&&d({value:$.value}),T&&d({value:null})};g.addEventListener("change",f),S&&b(()=>g.removeEventListener("change",f))}else u&&(u.onmessage=({data:f})=>d(f));e.watch&&v(c,()=>{y||p()},{deep:e.watch!=="shallow"}),o&&p(o)}return c}function E(t={}){return N(document.cookie,t)}function V(t,i,e={}){return i==null?A(t,i,{...e,maxAge:-1}):A(t,i,e)}function K(t,i,e={}){document.cookie=V(t,i,e)}const j=2147483647;function q(t,i,e){let r,n,s=0;const o=e?O(t):{value:t};return C()&&b(()=>{n?.(),clearTimeout(r)}),I((a,c)=>{e&&(n=v(o,c));function u(){s=0,clearTimeout(r);const p=i-s,d=p<j?p:j;r=setTimeout(()=>{if(s+=d,s<i)return u();o.value=void 0,c()},d)}return{get(){return a(),o.value},set(p){u(),o.value=p,c()}}})}const X="$s";function G(...t){const i=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(i);const[e,r]=t;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const n=X+e,s=R(),o=D(s.payload.state,n);if(o.value===void 0&&r){const a=r();if(U(a))return s.payload.state[n]=a,a;o.value=a}return o}const Q=()=>{const t=J("xtream_creds",{default:()=>null,sameSite:"lax"}),i=G("xtreamCreds",()=>t.value);v(i,s=>{t.value=s},{deep:!0});const e=M(()=>!!i.value);function r(s){i.value={serverUrl:s.serverUrl.trim().replace(/\/+$/,""),username:s.username.trim(),password:s.password}}function n(){i.value=null,t.value=null}return{creds:i,isLoggedIn:e,login:r,logout:n}};export{G as a,Q as u};
