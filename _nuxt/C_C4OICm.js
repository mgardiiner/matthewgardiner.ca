import{_ as w}from"./mGhZIhbp.js";import{g as C,s as N,x as i,r as p,m as V,c as o,a as s,b as $,w as j,t as r,j as n,d as u,o as a}from"./B9SbaO2N.js";import{u as B}from"./CyDv9rUy.js";import{u as U}from"./DfCbZsTT.js";const D={class:"min-h-screen bg-slate-950 text-slate-50"},I={class:"max-w-6xl mx-auto px-4 py-4"},L={class:"flex items-center justify-between mb-4"},R={class:"text-xs text-slate-400"},M={class:"grid gap-6 lg:grid-cols-[2fr,1fr] items-start"},P={class:"w-full aspect-video bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl overflow-hidden border border-slate-800 mb-3 flex items-center justify-center"},S={class:"px-4 text-center"},T=["href"],X={key:1,class:"text-xs text-slate-500 mt-2"},A={key:2,class:"mt-3 text-[11px] text-slate-500 break-all text-left max-h-24 overflow-y-auto"},E={key:0,class:"text-red-400 text-sm mb-2"},F={key:1,class:"text-slate-400 text-sm"},G={class:"space-y-3"},O={class:"flex gap-3"},q=["src","alt"],z={class:"text-xl font-semibold leading-tight"},H={key:0,class:"text-sm text-slate-400"},J={key:1,class:"text-xs text-slate-500 mt-1"},K={key:0,class:"text-sm text-slate-300 space-y-1"},Q={key:0},W={key:1},Y={key:2},Z={key:3},ee={key:4,class:"pt-2 text-slate-200 text-sm"},ne=C({__name:"[id]",setup(te){const b=N(),v=i(()=>b.params.id),{xtreamFetch:k}=B(),{creds:d}=U(),x=p(!0),c=p(null),e=p(null),_=i(()=>d.value?d.value.serverUrl.replace(/\/+$/,""):"");V(async()=>{x.value=!0,c.value=null;try{console.log("[movie] loading info for",v.value);const l=await k({action:"get_vod_info",vod_id:v.value});console.log("[movie] get_vod_info response:",l),e.value=l}catch(l){console.error("[movie] error loading movie:",l),c.value=l?.message||"Unable to load this movie."}finally{x.value=!1}});const y=i(()=>e.value?.info?.name||"Movie"),h=i(()=>{const l=e.value?.info?.name;if(!l)return"";const t=l.match(/\((\d{4})\)/);return t?t[1]:""}),g=i(()=>e.value?.info?.movie_image||e.value?.info?.cover),m=i(()=>{if(!e.value)return null;const l=[e.value?.info?.movie_url,e.value?.info?.direct_source,e.value?.movie_data?.movie_url,e.value?.movie_data?.direct_source].filter(f=>typeof f=="string"&&f.length>0);if(l.length)return l[0];if(!d.value||!_.value)return null;const t=e.value?.movie_data?.container_extension||e.value?.info?.container_extension||"mkv";return`${_.value}/movie/${d.value.username}/${d.value.password}/${v.value}.${t}`});return(l,t)=>{const f=w;return a(),o("div",D,[s("div",I,[s("div",L,[$(f,{to:"/iptv/movies",class:"text-sm text-sky-300 hover:text-sky-200 underline underline-offset-2"},{default:j(()=>[...t[0]||(t[0]=[u(" ← Back to movies ",-1)])]),_:1}),s("p",R,"Stream ID: "+r(v.value),1)]),s("div",M,[s("div",null,[s("div",P,[s("div",S,[t[1]||(t[1]=s("p",{class:"text-sm text-slate-200 mb-2"}," In-browser playback isn’t available for this provider. ",-1)),t[2]||(t[2]=s("p",{class:"text-xs text-slate-400 mb-3"}," Use the button below to open this stream in an external player (like VLC or a dedicated IPTV app). ",-1)),m.value?(a(),o("a",{key:0,href:m.value,target:"_blank",rel:"noopener",class:"inline-flex items-center justify-center px-4 py-2 rounded-full bg-sky-600 hover:bg-sky-500 text-xs font-semibold text-white shadow-sm"}," Open in external player ",8,T)):(a(),o("p",X," No external player URL could be generated for this movie. ")),m.value?(a(),o("p",A,r(m.value),1)):n("",!0)])]),c.value?(a(),o("p",E,r(c.value),1)):n("",!0),x.value&&!c.value?(a(),o("p",F,"Loading movie…")):n("",!0)]),s("aside",G,[s("div",O,[g.value?(a(),o("img",{key:0,src:g.value,alt:y.value,class:"w-24 h-32 rounded-lg object-cover border border-slate-700"},null,8,q)):n("",!0),s("div",null,[s("h1",z,r(y.value),1),h.value?(a(),o("p",H,r(h.value),1)):n("",!0),e.value?.info?.releasedate?(a(),o("p",J," Released: "+r(e.value.info.releasedate),1)):n("",!0)])]),e.value?.info?(a(),o("div",K,[e.value.info.genre?(a(),o("p",Q,[t[3]||(t[3]=s("span",{class:"font-medium text-slate-400"},"Genre:",-1)),u(" "+r(e.value.info.genre),1)])):n("",!0),e.value.info.duration?(a(),o("p",W,[t[4]||(t[4]=s("span",{class:"font-medium text-slate-400"},"Duration:",-1)),u(" "+r(e.value.info.duration),1)])):n("",!0),e.value.info.director?(a(),o("p",Y,[t[5]||(t[5]=s("span",{class:"font-medium text-slate-400"},"Director:",-1)),u(" "+r(e.value.info.director),1)])):n("",!0),e.value.info.actors?(a(),o("p",Z,[t[6]||(t[6]=s("span",{class:"font-medium text-slate-400"},"Cast:",-1)),u(" "+r(e.value.info.actors),1)])):n("",!0),e.value.info.plot?(a(),o("p",ee,[t[7]||(t[7]=s("span",{class:"block font-medium text-slate-400 mb-1"},"Plot",-1)),u(" "+r(e.value.info.plot),1)])):n("",!0)])):n("",!0)])])])])}}});export{ne as default};
