import{_ as ae}from"./mGhZIhbp.js";import{g as re,r as d,x as l,m as le,c as r,a as s,j as y,b as ne,t as p,w as T,y as g,F as V,z as $,l as I,v as ie,A as ue,d as w,o as a,B as de}from"./B9SbaO2N.js";import{u as ce}from"./CyDv9rUy.js";import"./DfCbZsTT.js";const xe={class:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-950 to-slate-900 text-slate-100"},pe={class:"max-w-6xl mx-auto px-4 pb-12 pt-6"},ge={class:"flex items-center justify-between mb-6"},me={class:"text-sm text-slate-400 mt-1"},ve={class:"mb-6 flex flex-col gap-3 bg-slate-900/60 border border-slate-700/60 rounded-xl px-4 py-3 backdrop-blur"},ye={class:"flex flex-wrap items-center gap-2"},fe={class:"flex flex-wrap gap-4 items-center"},be={class:"flex items-center gap-2"},ke=["value"],_e=["value"],we={key:1,class:"text-xs text-slate-500"},Ce={class:"flex flex-wrap gap-3 items-center ml-auto"},he={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},Le={key:0,class:"w-full text-xs text-slate-500 mt-2 flex justify-end"},Me={class:"font-medium text-slate-200 mx-1"},Ae={class:"font-medium text-slate-200 mx-1"},Be={key:0,class:"text-red-400 mb-4"},Re={key:1,class:"text-slate-400 mb-4"},Se={key:2,class:"grid gap-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8"},Ee={class:"relative w-full overflow-hidden"},ze=["src","alt"],Fe={key:1,class:"w-full aspect-[4/5] bg-slate-800 flex items-center justify-center text-slate-500 text-[10px]"},Ke={class:"p-2 space-y-1"},De={class:"text-[11px] font-semibold leading-snug line-clamp-2 text-slate-50"},Pe={class:"flex flex-wrap items-center gap-1 text-[10px] text-slate-400"},Te={key:0},Ve={key:3,class:"text-slate-400"},Ue=re({__name:"index",setup($e){const{xtreamFetch:M}=ce(),O=["SOCCER","DE -","BE -","PT/BR -","ES -","FR -","LA -","AF -","QC -","IT -","NL -","GR -","NORDIC","SVENSKA","DANSKE","NORGE","MT -","BG -","AL -","EX -","TR -","IR -","SO -","IN -","BN -","PK -","BR -"].map(e=>e.toLowerCase()),j=e=>{const t=e.toLowerCase();return O.some(u=>t.startsWith(u))},A=["netflix"].map(e=>e.toLowerCase()),B=["amazon","prime"].map(e=>e.toLowerCase()),R=["disney"].map(e=>e.toLowerCase()),G=["apple+"].map(e=>e.toLowerCase()),U=["discovery+"].map(e=>e.toLowerCase()),X=["paramount"].map(e=>e.toLowerCase()),S=d([]),f=d([]),b=d(null),m=d(!1),v=d(null),n=d("generic"),c=l(()=>S.value.filter(e=>!j(e.category_name))),i=(e,t)=>{const u=e.category_name.toLowerCase();return t.some(o=>u.includes(o))},Y=l(()=>c.value.filter(e=>i(e,A))),Q=l(()=>c.value.filter(e=>i(e,B))),W=l(()=>c.value.filter(e=>i(e,R))),q=l(()=>c.value.filter(e=>e.category_name.includes("APPLE+"))),H=l(()=>c.value.filter(e=>e.category_name.includes("DISCOVERY+"))),J=l(()=>c.value.filter(e=>e.category_name.includes("PARAMOUNT"))),Z=l(()=>c.value.filter(e=>!i(e,A)&&!i(e,B)&&!i(e,R)&&!i(e,G)&&!i(e,U)&&!i(e,X))),C=l(()=>{switch(n.value){case"netflix":return Y.value;case"amazon":return Q.value;case"disney":return W.value;case"apple+":return q.value;case"discovery+":return H.value;case"paramount":return J.value;case"generic":default:return Z.value}}),ee=l(()=>c.value.find(e=>e.category_id===b.value)||null),te=async()=>{m.value=!0,v.value=null;try{const e=await M({action:"get_vod_categories"});S.value=e,await x("generic")}catch(e){console.error(e),v.value="Failed to load movie categories."}finally{m.value=!1}},E=async e=>{m.value=!0,v.value=null;try{const t=await M({action:"get_vod_streams",category_id:e});f.value=t}catch(t){console.error(t),v.value="Failed to load movies for this category."}finally{m.value=!1}},se=async e=>{e&&(b.value=e,await E(e))},x=async e=>{n.value=e;const t=C.value;if(!t.length){f.value=[];return}const o=t.find(L=>L.category_id===b.value)||t[0];b.value=o.category_id,await E(o.category_id)},z=e=>{const t=e.name.match(/\((\d{4})\)/);return t?t[1]:""},k=e=>{const t=Number(e.rating);return Number.isNaN(t)?0:t},oe=e=>e>=8?"bg-emerald-100 text-emerald-700":e>=6?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600",_=d(""),h=d(0),F=d(null),N=l(()=>f.value.filter(e=>{const t=e.name?.toLowerCase()||"",u=!_.value||t.includes(_.value.toLowerCase()),L=k(e)>=h.value;let K=!0;if(F.value){const D=e.name.match(/\((\d{4})\)/),P=D?Number(D[1]):null;K=!P||P>=F.value}return u&&L&&K}));return le(()=>{te()}),(e,t)=>{const u=ae;return a(),r("div",xe,[s("div",pe,[s("div",ge,[s("div",null,[t[10]||(t[10]=s("h1",{class:"text-3xl font-semibold tracking-tight"},"Movies",-1)),s("p",me,p(ee.value?.category_name||"Loading categories…"),1)]),ne(u,{to:"/iptv/dashboard",class:"text-sm text-sky-300 hover:text-sky-200 underline underline-offset-2"},{default:T(()=>[...t[11]||(t[11]=[w(" Back to dashboard ",-1)])]),_:1})]),s("div",ve,[s("div",ye,[t[12]||(t[12]=s("span",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"}," Source ",-1)),s("button",{type:"button",onClick:t[0]||(t[0]=o=>x("generic")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="generic"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Generic (EN / PL / etc.) ",2),s("button",{type:"button",onClick:t[1]||(t[1]=o=>x("netflix")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="netflix"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Netflix ",2),s("button",{type:"button",onClick:t[2]||(t[2]=o=>x("amazon")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="amazon"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Amazon ",2),s("button",{type:"button",onClick:t[3]||(t[3]=o=>x("disney")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="disney"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Disney ",2),s("button",{type:"button",onClick:t[4]||(t[4]=o=>x("apple+")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="apple+"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Apple+ ",2),s("button",{type:"button",onClick:t[5]||(t[5]=o=>x("discovery+")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="discovery+"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Discovery+ ",2),s("button",{type:"button",onClick:t[6]||(t[6]=o=>x("paramount")),class:g(["px-3 py-1.5 rounded-full text-xs font-medium border transition",n.value==="paramount"?"bg-sky-600 border-sky-500 text-white":"bg-slate-800 border-slate-700 text-slate-200 hover:border-sky-500"])}," Paramount ",2)]),s("div",fe,[s("div",be,[t[13]||(t[13]=s("span",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"}," Category ",-1)),C.value.length?(a(),r("select",{key:0,value:b.value||"",onChange:t[7]||(t[7]=o=>se(o.target.value)),class:"bg-slate-800/80 border border-slate-700 rounded-full px-3 py-1.5 text-xs text-slate-100 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"},[(a(!0),r(V,null,$(C.value,o=>(a(),r("option",{key:o.category_id,value:o.category_id},p(o.category_name),9,_e))),128))],40,ke)):(a(),r("span",we," No categories for this source. "))]),s("div",Ce,[s("div",he,[t[14]||(t[14]=s("span",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"}," Search ",-1)),I(s("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>_.value=o),type:"text",placeholder:"Title…",class:"bg-slate-900/70 border border-slate-700 rounded-full px-3 py-1.5 text-xs text-slate-100 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"},null,512),[[ie,_.value]])]),s("div",Ne,[t[16]||(t[16]=s("span",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"}," Rating ",-1)),I(s("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>h.value=o),class:"bg-slate-900/70 border border-slate-700 rounded-full px-2 py-1.5 text-xs text-slate-100 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"},[...t[15]||(t[15]=[s("option",{value:0},"Any",-1),s("option",{value:5},"5+",-1),s("option",{value:6},"6+",-1),s("option",{value:7},"7+",-1),s("option",{value:8},"8+",-1)])],512),[[ue,h.value,void 0,{number:!0}]])])]),f.value.length?(a(),r("p",Le,[t[17]||(t[17]=w(" Showing ",-1)),s("span",Me,p(N.value.length),1),t[18]||(t[18]=w(" of ",-1)),s("span",Ae,p(f.value.length),1),t[19]||(t[19]=w(" movies ",-1))])):y("",!0)])]),v.value?(a(),r("p",Be,p(v.value),1)):y("",!0),m.value?(a(),r("p",Re,"Loading movies…")):y("",!0),!m.value&&N.value.length?(a(),r("div",Se,[(a(!0),r(V,null,$(N.value,o=>(a(),de(u,{key:o.stream_id,to:`/iptv/movies/${o.stream_id}`,class:"group bg-slate-900/70 border border-slate-800 rounded-xl overflow-hidden hover:border-sky-500/70 transition-all duration-200"},{default:T(()=>[s("div",Ee,[o.stream_icon?(a(),r("img",{key:0,src:o.stream_icon,alt:o.name,class:"w-full aspect-[4/5] object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"},null,8,ze)):(a(),r("div",Fe," No Art ")),k(o)>0?(a(),r("div",{key:2,class:g(["absolute top-1 left-1 text-[10px] font-semibold px-1.5 py-0.5 rounded-full shadow",oe(k(o))])}," ★ "+p(k(o).toFixed(1)),3)):y("",!0)]),s("div",Ke,[s("h2",De,p(o.name),1),s("div",Pe,[z(o)?(a(),r("span",Te,p(z(o)),1)):y("",!0)])])]),_:2},1032,["to"]))),128))])):m.value?y("",!0):(a(),r("p",Ve,"No movies match your filters."))])])}}});export{Ue as default};
