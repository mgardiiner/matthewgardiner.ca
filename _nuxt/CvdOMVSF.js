import{g,r,c as v,a as t,j as x,k as h,l as d,v as m,t as c,o as b,n as k}from"./DDdGTNQA.js";import{u as U}from"./B-RZKRZT.js";const L={class:"min-h-screen flex items-center justify-center bg-gray-100"},V={class:"w-full max-w-md bg-white p-8 shadow-md rounded-lg"},_=["disabled"],E={key:0,class:"mt-4 text-red-500 text-center"},M=g({__name:"index",setup(X){const u=r(""),i=r(""),a=r(""),o=r(null),n=r(!1),{login:f}=U(),w=async()=>{n.value=!0,o.value=null;try{const s=u.value.trim().replace(/\/+$/,""),e=i.value.trim();if(!s||!e||!a.value)throw new Error("Missing fields");const l=`${s}/player_api.php`,p=await $fetch(l,{method:"GET",params:{username:e,password:a.value}}),y=Number(p?.user_info?.auth??0);if(!p?.user_info||y!==1)throw new Error("Invalid Xtream credentials");f({serverUrl:s,username:e,password:a.value}),await k("/iptv/dashboard")}catch(s){console.error(s),o.value="Login failed. Please check your Xtream details."}finally{n.value=!1}};return(s,e)=>(b(),v("div",L,[t("div",V,[e[6]||(e[6]=t("h1",{class:"text-2xl font-semibold mb-6 text-center"},"Xtream Login",-1)),t("form",{onSubmit:h(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block mb-1 font-medium"},"Server URL",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),type:"text",placeholder:"http://example.com:8080",class:"w-full border rounded px-3 py-2",required:""},null,512),[[m,u.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1 font-medium"},"Username",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),type:"text",class:"w-full border rounded px-3 py-2",required:""},null,512),[[m,i.value]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 font-medium"},"Password",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value=l),type:"password",class:"w-full border rounded px-3 py-2",required:""},null,512),[[m,a.value]])]),t("button",{type:"submit",disabled:n.value,class:"w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},c(n.value?"Logging in...":"Login"),9,_)],32),o.value?(b(),v("p",E,c(o.value),1)):x("",!0)])]))}});export{M as default};
