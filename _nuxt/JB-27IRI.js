import{_ as b}from"./DQu6aDY2.js";import{u as h}from"./CLStg_Nh.js";import{u as y}from"./DlcP7OL2.js";import{g as k,r as _,p as w,c as o,a as r,j as i,b as N,w as x,t as f,q as B,F as C,C as F,o as a,d as j,B as V,y as L}from"./DDdGTNQA.js";import"./B-RZKRZT.js";const z={class:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-950 to-slate-900 text-slate-100"},D={class:"max-w-6xl mx-auto px-4 pb-12 pt-6"},E={class:"flex items-center justify-between mb-6"},S={key:0,class:"text-red-400 mb-4"},Y={key:1,class:"text-slate-400 mb-4"},$={key:2,class:"text-slate-400"},q={key:3,class:"grid gap-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8"},A={class:"relative w-full overflow-hidden"},M=["src","alt"],T={key:1,class:"w-full aspect-[4/5] bg-slate-800 flex items-center justify-center text-slate-500 text-[10px]"},U={class:"p-2 space-y-1"},X={class:"text-[11px] font-semibold leading-snug line-clamp-2 text-slate-50"},P=k({__name:"favourites",setup(G){const{xtreamFetch:g}=h(),{favs:d}=y(),l=_(!1),c=_(null),u=_([]),m=s=>{const t=Number(s.rating);return Number.isNaN(t)?0:t},p=s=>s>=8?"bg-emerald-100 text-emerald-700":s>=6?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600";return w(async()=>{if(d.value.length){l.value=!0,c.value=null;try{const s=[];for(const t of d.value)try{const n=await g({action:"get_vod_info",vod_id:t}),e=n?.info,v=n?.movie_data;s.push({stream_id:Number(t),name:e?.name||v?.name||`Stream ${t}`,stream_icon:e?.movie_image||e?.cover,rating:e?.rating,container_extension:v?.container_extension||e?.container_extension})}catch(n){console.warn("Failed to load favourite",t,n)}u.value=s}catch(s){console.error("[favourites] error:",s),c.value=s?.message||"Unable to load favourites."}finally{l.value=!1}}}),(s,t)=>{const n=b;return a(),o("div",z,[r("div",D,[r("div",E,[t[1]||(t[1]=r("div",null,[r("h1",{class:"text-3xl font-semibold tracking-tight"},"Favourites"),r("p",{class:"text-sm text-slate-400 mt-1"}," Your saved movies from any category. ")],-1)),N(n,{to:"/iptv/movies",class:"text-sm text-sky-300 hover:text-sky-200 underline underline-offset-2"},{default:x(()=>[...t[0]||(t[0]=[j(" Back to all movies ",-1)])]),_:1})]),c.value?(a(),o("p",S,f(c.value),1)):i("",!0),l.value?(a(),o("p",Y,"Loading favourites…")):i("",!0),!l.value&&!B(d).length?(a(),o("p",$," You haven't favourited any movies yet. ")):i("",!0),!l.value&&u.value.length?(a(),o("div",q,[(a(!0),o(C,null,F(u.value,e=>(a(),V(n,{key:e.stream_id,to:`/iptv/movies/${e.stream_id}`,class:"group bg-slate-900/70 border border-slate-800 rounded-xl overflow-hidden hover:border-sky-500/70 transition-all duration-200"},{default:x(()=>[r("div",A,[e.stream_icon?(a(),o("img",{key:0,src:e.stream_icon,alt:e.name,class:"w-full aspect-[4/5] object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"},null,8,M)):(a(),o("div",T," No Art ")),m(e)>0?(a(),o("div",{key:2,class:L(["absolute top-1 left-1 text-[10px] font-semibold px-1.5 py-0.5 rounded-full shadow",p(m(e))])}," ★ "+f(m(e).toFixed(1)),3)):i("",!0)]),r("div",U,[r("h2",X,f(e.name),1)])]),_:2},1032,["to"]))),128))])):i("",!0)])])}}});export{P as default};
